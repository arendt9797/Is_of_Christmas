<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>크리스마스 I들</title>
    <link rel="stylesheet" href="./css/index.css" />
    <link rel="stylesheet" href="./css/memcss.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bagel+Fat+One&family=Dongle&family=Noto+Sans+KR:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="./source/santa.png" />
  </head>
  <script src="./js/index.js"></script>
  <body>
    <div class="snow_wrap">
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
      <div class="snow_div"><p>❅</p></div>
    </div>

    <div class="container">
      <h1 id="main-title">
        <span class="christmas">크리스마스의 </span>
        <span class="i">'I'</span>
        <span class="others"> 들</span>
      </h1>
      <div class="menu">
        <a href="#" class="link">
          <img src="source/santa.png" alt="팀 소개 이미지" />
          <span>팀 소개</span>
        </a>
        <a href="#" class="link">
          <img src="source/ornament.png" alt="프로필 이미지" />
          <span>프로필</span>
        </a>
        <a href="#" class="link">
          <img src="source/ring.png" alt="방명록 이미지" />
          <span>방명록</span>
        </a>
      </div>
    </div>

    <!-- 멤버 소개 페이지를 만들어주세요! -->
    <div class="mem_container">
      <div class="mem_treebox">
        <div class="mem_tree">
          <div class="mem_on mem_1">이기리</div>
          <div class="mem_on mem_2">김우경</div>
          <div class="mem_on mem_3">최수진</div>
          <div class="mem_on mem_4">유익환</div>
          <div class="mem_on mem_5">방은혜</div>
          <audio
            id="clickSound"
            src="source/mem_on_bell.wav"
            type="audio"
            onloadstart="this.volume = 0.3"
          ></audio>
        </div>
      </div>
      <div class="mem_modal">
        <div class="mem_cardbox">
          <div class="mem_btn">
            <!-- <div class="modal_close_btn">닫기</div> -->
          </div>
          <div class="mem_profile">
            <div class="mem_left">
              <div class="mem_choiced">선택된 멤버 얼굴</div>
              <div class="mem_infolist">
                <div class="mem_name mem_info">
                  <p>이름</p>
                </div>
                <div class="mem_mbti mem_info">
                  <p>mbti</p>
                </div>
                <div class="mem_bloglink mem_info">
                  <p><a href="">블로그로 이동</a></p>
                </div>
              </div>
            </div>
            <div class="mem_right">
              <div class="mem_ment">
                <p>
                  <span class="font_dongle">
                    여러분과 함께 돈 벌고 싶습니다!
                    </span>
                </p>
              </div>
              <div class="mem_schedule">
                <p class="schedulement">Christmas Schedule</p>
                <div class="mem_sch_full">
                  <div class="mem_sch_half">
                    <p class="font_dongle scheduletext">
                      10:00 공주 기상
                    </p>
                    <p>12:00 공주 크리스마스 만찬</p>
                  </div>
                  <div class="mem_sch_half">
                    <p class="font_dongle scheduletext">
                      14:00 우아한 공주들의 티타임
                    </p>
                    <p>16:00 으아한 공주들의 쏘맥타임</p>
                    <p>19:00 으악한 공주들 집에 갈 시간</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mem_facelist">
            <div class="mem_face mem_1"></div>
            <div class="mem_face mem_2"></div>
            <div class="mem_face mem_3"></div>
            <div class="mem_face mem_4"></div>
            <div class="mem_face mem_5"></div>
          </div>
        </div>
      </div>
    </div>

    <script>

      const modal = document.querySelector(".mem_modal");
      const profileimg = document.querySelector(".mem_choiced")
      // 모든 .mem_on 요소 선택
      const onement = document.querySelectorAll(".mem_on");
      // 모든 .member div 요소를 선택
      const members = document.querySelectorAll(".mem_face");
      
      // 각 멤버이름에 속성 추가
      // 각 div에 추가할 이름 배열
      const names = ["이기리", "김우경", "최수진", "유익환", "방은혜"];
      // 각 div에 이름을 동적으로 추가
      members.forEach((member, index) => {
          member.setAttribute("data-name", names[index]); // data-name 속성 설정
      });
      onement.forEach((member, index) => {
          member.setAttribute("data-name", names[index]); // data-name 속성 설정
      })
      // 모달 열기
      function openModal() {
            modal.style.display = "block";
      }
      // 모달 닫기
      function closeModal() {
          modal.style.display = "none";
      }
      // 각 onement div에 클릭 이벤트 추가
      onement.forEach((div) => {
        div.addEventListener("click", function () {
          //tree에 있는 멤버를 클릭 시 소리가 나도록 함
          const sound = document.getElementById("clickSound");
          sound.currentTime = 0; // 재생 위치 초기화
          sound.play(); // 재생

          //멤버 오너먼트 클릭 시 모달에 클릭된 멤버 얼굴이 뜨기
          // 선택한 div의 background-image 가져오기 (selectedimg)
          const bgImage = getComputedStyle(div).backgroundImage;
          
          // 모달 내용에 background-image 설정
          profileimg.style.backgroundImage = bgImage;
          profileimg.style.backgroundSize ="contain";

          // 모달 표시
          openModal();  
          
          const selectedName = div.dataset.name;
          members.forEach(e => {
            if(selectedName === e.dataset.name){
              e.style.opacity = "0.3";
              e.style.pointerEvents = 'none'; // 클릭 비활성화
            }else{
              e.style.opacity = "1";
              e.style.pointerEvents = "auto" //클릭 활성화
            }
          });
        });
      });

      // 모달 내부 div 클릭 이벤트 추가
      members.forEach(modalDiv => {
          modalDiv.addEventListener('click', () => {
              const selectedName = modalDiv.dataset.name;

              // 모달 닫기
              modal.style.display = 'none';

              // 외부 div 중 동일한 data-name을 가진 div 클릭 이벤트 트리거
              onement.forEach(div => {
                  if (div.dataset.name === selectedName) {
                      div.click();
                  }
              });
          });
      });
      //모달 바깥 영역을 클릭하면 화면이 닫히게 함
      modal.addEventListener("click", (e) => {
        if (e.target === document.querySelector(".mem_modal")) {
          closeModal();
        }
      });
 
    </script>
  </body>
</html>
